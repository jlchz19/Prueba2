{% extends "base.html" %}

{% block title %}Nuevo Empleado - AgroGest{% endblock %}
{% block page_title %}Registrar Nuevo Empleado{% endblock %}

{% block page_actions %}
<a href="{{ url_for('empleados') }}" class="btn btn-secondary">
    <i class="fas fa-arrow-left me-2"></i>Volver
</a>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-user-plus me-2"></i>Información del Empleado
            </div>
            <div class="card-body">
                <form method="POST" class="needs-validation" novalidate>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre" required>
                                <label for="nombre">Nombre *</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="apellido" name="apellido" placeholder="Apellido" required>
                                <label for="apellido">Apellido *</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="cedula" name="cedula" placeholder="Cédula" required>
                                <label for="cedula">Cédula *</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Teléfono" required>
                                <label for="telefono">Teléfono *</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="direccion" name="direccion" placeholder="Dirección" required>
                                <label for="direccion">Dirección *</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <select class="form-select" id="cargo" name="cargo" required>
                                    <option selected disabled value="">Seleccionar cargo...</option>
                                    <option value="Veterinario">Veterinario</option>
                                    <option value="Vaquero">Vaquero</option>
                                    <option value="Porquero">Porquero</option>
                                    <option value="Técnico Agrícola">Técnico Agrícola</option>
                                    <option value="Administrador">Administrador</option>
                                    <option value="Supervisor">Supervisor</option>
                                    <option value="Operario">Operario</option>
                                    <option value="Contador">Contador</option>
                                    <option value="Secretario">Secretario</option>
                                    <option value="Mecánico">Mecánico</option>
                                    <option value="Conductor">Conductor</option>
                                    <option value="Auxiliar">Auxiliar</option>
                                    <option value="Otro">Otro</option>
                                </select>
                                <label for="cargo">Cargo *</label>
                            </div>
                        </div>
                        <div class="col-md-6" id="otro_cargo_div" style="display: none;">
                             <div class="form-floating">
                                <input type="text" class="form-control" id="otro_cargo" name="otro_cargo">
                                <label for="otro_cargo">Especificar otro cargo</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="date" class="form-control" id="fecha_contratacion" name="fecha_contratacion" required>
                                <label for="fecha_contratacion">Fecha de Contratación *</label>
                            </div>
                        </div>
                         <div class="col-md-6">
                            <div class="form-floating">
                                <input type="number" step="0.01" class="form-control" id="salario" name="salario" placeholder="Salario" required>
                                <label for="salario">Salario Mensual *</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-floating">
                                <textarea class="form-control" id="descripcion" name="descripcion" placeholder="Descripción de funciones" style="height: 80px"></textarea>
                                <label for="descripcion">Descripción de lo que hace el empleado</label>
                                <div class="form-text">Ejemplo: Responsable del manejo sanitario del ganado, aplicación de vacunas, supervisión de partos, etc.</div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="d-flex justify-content-end">
                        <a href="{{ url_for('empleados') }}" class="btn btn-secondary me-2">Cancelar</a>
                        <button type="submit" class="btn btn-primary">Registrar Empleado</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Información sobre cargos -->
        <div class="card mt-4">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>Información sobre Cargos
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Cargos Especializados:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-stethoscope text-primary me-2"></i><strong>Veterinario:</strong> Cuidado médico de animales</li>
                            <li><i class="fas fa-horse text-success me-2"></i><strong>Vaquero:</strong> Manejo de ganado bovino</li>
                            <li><i class="fas fa-bacon text-warning me-2"></i><strong>Porquero:</strong> Manejo de porcinos</li>
                            <li><i class="fas fa-tractor text-info me-2"></i><strong>Técnico Agrícola:</strong> Manejo de cultivos y pastos</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Cargos de Apoyo:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-briefcase text-secondary me-2"></i><strong>Administrador:</strong> Gestión administrativa</li>
                            <li><i class="fas fa-binoculars text-info me-2"></i><strong>Supervisor:</strong> Supervisión de operaciones</li>
                            <li><i class="fas fa-tools text-warning me-2"></i><strong>Operario:</strong> Trabajo operativo</li>
                            <li><i class="fas fa-chart-line text-success me-2"></i><strong>Contador:</strong> Gestión financiera</li>
                            <li><i class="fas fa-keyboard text-primary me-2"></i><strong>Secretario:</strong> Apoyo administrativo</li>
                            <li><i class="fas fa-wrench text-dark me-2"></i><strong>Mecánico:</strong> Mantenimiento de equipos</li>
                            <li><i class="fas fa-truck text-primary me-2"></i><strong>Conductor:</strong> Transporte y logística</li>
                            <li><i class="fas fa-hands-helping text-success me-2"></i><strong>Auxiliar:</strong> Apoyo general</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const cargoSelect = document.getElementById('cargo');
    const otroCargoDiv = document.getElementById('otro_cargo_div');
    const otroCargoInput = document.getElementById('otro_cargo');

    cargoSelect.addEventListener('change', function() {
        if (this.value === 'Otro') {
            otroCargoDiv.style.display = 'block';
            otroCargoInput.required = true;
        } else {
            otroCargoDiv.style.display = 'none';
            otroCargoInput.required = false;
        }
    });
    
    document.getElementById('fecha_contratacion').valueAsDate = new Date();

    const form = document.querySelector('.needs-validation');
    form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
        }

        if (cargoSelect.value === 'Otro' && !otroCargoInput.value.trim()) {
            otroCargoInput.classList.add('is-invalid');
            event.preventDefault();
            event.stopPropagation();
        } else {
            otroCargoInput.classList.remove('is-invalid');
        }

        form.classList.add('was-validated');
    }, false);
});
</script>
{% endblock %} 